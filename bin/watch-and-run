#!/usr/bin/env bash
# small script to run a command on a file and update the output on change.
source ../zsh/moar_colors.zsh
echo $DOTDIR
exit 0

file="$1"
command="${@:2}"

if [ "$#" -lt 2 ]; then
  echo "Usage: $0 <file-to-watch> <command>"
  exit 1;
fi

run () {
  clear
  echo "$FG;;[watch-and-run]: running $command"
  $command
  echo -e "\x1b[32m;;[watch-and-run]: done, waiting for changes.\x1b[0m"
}

clear
run

fswatch -0 "$file" | while read -d "" event; do
  clear
  run
done

