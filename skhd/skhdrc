# modes
:: default   : ~/.config/sketchybar/modules/skhd-mode default
:: resize @ : ~/.config/sketchybar/modules/skhd-mode resize blue
:: gaps   @ : ~/.config/sketchybar/modules/skhd-mode gaps blue
:: layout @ : ~/.config/sketchybar/modules/skhd-mode layout pink
:: move   @ : ~/.config/sketchybar/modules/skhd-mode move blue
:: launch @ : ~/.config/sketchybar/modules/skhd-mode launch lavender
:: system @ : ~/.config/sketchybar/modules/skhd-mode system white

layout, gaps, resize, launch, system, move, default < ctrl + cmd - r ; resize
layout, gaps, resize, launch, system, move, default < ctrl + cmd - o ; layout
layout, gaps, resize, launch, system, move, default < ctrl + cmd - g ; gaps
layout, gaps, resize, launch, system, move, default < ctrl + cmd - m ; move
layout, gaps, resize, launch, system, move, default < ctrl + cmd - a ; launch
layout, gaps, resize, launch, system, move, default < ctrl + cmd - x ; system

layout, gaps, resize, launch, system, move < escape ; default
layout, gaps, resize, launch, system, move < return ; default

# default mode {{{
default, move, layout, resize, gaps < ctrl + cmd - h    : yabai -m window --focus west  || yabai -m display --focus west  || yabai -m space --focus prev || yabai -m space --focus last
default, move, layout, resize, gaps < ctrl + cmd - j    : yabai -m window --focus south || yabai -m display --focus south 
default, move, layout, resize, gaps < ctrl + cmd - k    : yabai -m window --focus north || yabai -m display --focus north
default, move, layout, resize, gaps < ctrl + cmd - l    : yabai -m window --focus east  || yabai -m display --focus east  || yabai -m space --focus next || yabai -m space --focus 1
default, move, layout, resize, gaps < ctrl + cmd - n    : yabai -m window --focus stack.next || yabai -m window --focus stack.first
default, move, layout, resize, gaps < ctrl + cmd - p    : yabai -m window --focus stack.prev || yabai -m window --focus stack.last
default, move, layout, resize, gaps < hyper - 1         : yabai -m space --focus 1
default, move, layout, resize, gaps < hyper - 2         : yabai -m space --focus 2
default, move, layout, resize, gaps < hyper - 3         : yabai -m space --focus 3
default, move, layout, resize, gaps < hyper - 4         : yabai -m space --focus 4
default, move, layout, resize, gaps < hyper - 5         : yabai -m space --focus 5
default, move, layout, resize, gaps < hyper - 6         : yabai -m space --focus 6
default, move, layout, resize, gaps < hyper - 7         : yabai -m space --focus 7
default, move, layout, resize, gaps < hyper - 8         : yabai -m space --focus 8
default, move, layout, resize, gaps < hyper - 9         : yabai -m space --focus 9
default, move, layout, resize, gaps < cmd + alt - left  : yabai -m space --focus prev || yabai -m space --focus last
default, move, layout, resize, gaps < cmd + alt - right : yabai -m space --focus next || yabai -m space --focus 1
default, move, layout, resize, gaps < cmd + ctrl - 0x1E : yabai -m space --focus next || yabai -m space --focus 1
default, move, layout, resize, gaps < cmd + ctrl - 0x21 : yabai -m space --focus prev || yabai -m space --focus last
# }}}

# mode: move {{{
move < 1 : yabai -m window --space 1
move < 2 : yabai -m window --space 2
move < 3 : yabai -m window --space 3
move < 4 : yabai -m window --space 4
move < 5 : yabai -m window --space 5
move < 6 : yabai -m window --space 6

# second screen (usually)
move < 7 : yabai -m window --space 7
move < 8 : yabai -m window --space 8
move < 9 : yabai -m window --space 9

move < h: yabai -m window --swap west
move < j: yabai -m window --swap south
move < k: yabai -m window --swap north
move < l: yabai -m window --swap east

move < shift - h: yabai -m window --warp west
move < shift - j: yabai -m window --warp south
move < shift - k: yabai -m window --warp north
move < shift - l: yabai -m window --warp east

# }}}
# mode: launch {{{
launch < t : kitty @ launch -1 --type os-window --os-window-title="Kitty Scratch"  ;
launch < o      : ~/.config/skhd/apps/obsidian launch-or-focus
cmd + ctrl - return : skhd -k 'escape' ; yabai -m window --focus $(yabai -m query --windows --space | jq '.[] | select(.app == "kitgty") | .id' -e || echo error) 2>/dev/null || kitty @ launch || kitty -1

launch < h         : yabai -m window --insert east  ; skhd -k 'escape'
launch < j         : yabai -m window --insert south ; skhd -k 'escape'
launch < k         : yabai -m window --insert north ; skhd -k 'escape'
launch < l         : yabai -m window --insert west  ; skhd -k 'escape'

launch < shift - h : yabai -m window --insert west  ; skhd -k 'escape' ; sleep 0.01 ; skhd -k 'cmd - n'
launch < shift - j : yabai -m window --insert south ; skhd -k 'escape' ; sleep 0.01 ; skhd -k 'cmd - n'
launch < shift - k : yabai -m window --insert north ; skhd -k 'escape' ; sleep 0.01 ; skhd -k 'cmd - n'
launch < shift - l : yabai -m window --insert east  ; skhd -k 'escape' ; sleep 0.01 ; skhd -k 'cmd - n'

# }}}
# mode: resize {{{
resize < h   : yabai -m window --resize left:-64:0 || yabai -m window --resize right:-64:0
resize < j   : yabai -m window --resize top:0:64   || yabai -m window --resize bottom:0:64
resize < k     : yabai -m window --resize top:0:-64  || yabai -m window --resize bottom:0:-64
resize < l  : yabai -m window --resize left:64:0  || yabai -m window --resize right:64:0
resize < shift - h   : yabai -m window --resize right:-64:0  || yabai -m window --resize left:-64:0
resize < shift - j   : yabai -m window --resize bottom:0:64  || yabai -m window --resize up:0:64
resize < shift - k     : yabai -m window --resize bottom:0:-64 || yabai -m window --resize up:0:-64
resize < shift - l  : yabai -m window --resize right:64:0   || yabai -m window --resize left:64:0
# }}}
# mode: layout {{{
layout < y: yabai -m space --mirror y-axis

layout < h : yabai -m window --warp west
layout < j : yabai -m window --warp south
layout < k : yabai -m window --warp north
layout < l : yabai -m window --warp east

layout < shift - h : yabai -m window  west --stack $(yabai -m query --windows --window | jq -r '.id')
layout < shift - k : yabai -m window north --stack $(yabai -m query --windows --window | jq -r '.id')
layout < shift - j : yabai -m window south --stack $(yabai -m query --windows --window | jq -r '.id')
layout < shift - l : yabai -m window  east --stack $(yabai -m query --windows --window | jq -r '.id')

layout < o    : yabai -m space --balance
layout < i    : yabai -m window --ratio abs:0.66
layout < u    : yabai -m window --ratio abs:0.33
layout < p    : yabai -m window --ratio abs:0.5
layout < 0x21 : yabai -m window --ratio abs:0.25 # [
layout < 0x1E : yabai -m window --ratio abs:0.75 # ]
layout < 0x27 : yabai -m window --ratio abs:0.80 # '

layout < z    : yabai -m window --toggle zoom-parent
layout < 0x2C : yabai -m window --toggle split

layout < c    : yabai -m window --toggle float --grid 6:8:2:1:4:4

layout < x : yabai -m space --gap rel:8 --padding rel:8:8:8:8 # + 
layout < z : yabai -m space --gap rel:-9 --padding rel:-8:-8:-8:-8 # -
layout < 0 : yabai -m space --gap abs:0 --padding abs:0:0:0:0
layout < 1 : yabai -m space --gap abs:32 --padding abs:32:32:32:32
layout < 2 : yabai -m space --gap abs:320 --padding abs:64:64:256:256
layout < 3 : yabai -m space --gap abs:256 --padding abs:128:128:256:256
layout < 4 : yabai -m space --gap abs:128 --padding abs:128:128:128:128
layout < w : yabai -m space --gab abs:0 --padding abs:32:32:256:256 --layout stack

# WIP:
# layout < s    : yabai -m window $(yabai -m query --windows --window | jq '.["is-sticky"] == false and error("not sticky")' 2>/dev/null || echo "--toggle sticky")
# layout < f    : yabai -m window $(yabai -m query --windows --window | jq '.["is-float"] == false and error("not floaty")' 2>/dev/null || echo "--toggle float")

layout < f    : yabai -m window --toggle float
layout < s    : yabai -m window --toggle sticky

layout < shift - b : yabai -m space --layout bsp ; ~/.config/sketchybar/modules/layout
layout < shift - f : yabai -m space --layout float ; ~/.config/sketchybar/modules/layout
layout < shift - s : yabai -m space --layout stack ; ~/.config/sketchybar/modules/layout
# }}}
# mode: system {{{
system < r : skhd --reload ; skhd -k 'escape' ; ~/.config/sketchybar/modules/skhd-mode default
# }}}
# vi: fdm=marker
