#!/usr/bin/env bash

# ====== Variables =============================

declare -a gaps
declare -a color

sudo yabai --load-sa
# yabai -m signal --add event=dock_did_restart action="sudo yabai --load-sa"

yabai -m config layout                     bsp

yabai -m config top_padding                32
yabai -m config bottom_padding             32
yabai -m config left_padding               32
yabai -m config right_padding              32
yabai -m config window_gap                 32

yabai -m config window_placement           second_child
yabai -m config mouse_follows_focus        off
yabai -m config focus_follows_mouse        off

yabai -m config window_topmost             off
yabai -m config window_opacity             off

yabai -m config window_border              on
yabai -m config window_border_width        4
yabai -m config window_border_radius       10
yabai -m config active_window_border_color 0xFF7DCFFF
yabai -m config normal_window_border_color 0xFF7188a8
yabai -m config insert_feedback_color      0XFF41E6A2

yabai -m config active_window_opacity      1.0

yabai -m config split_ratio                0.50
yabai -m config split_type                 auto
yabai -m config auto_balance               off

yabai -m config mouse_modifier             ctrl
yabai -m config mouse_action1              move
yabai -m config mouse_action2              resize

yabai -m config --space 1 layout bsp --label "side"
yabai -m config --space 2 layout bsp --label "main"
yabai -m config --space 3 layout bsp --label "comm"
yabai -m config --space 4 layout bsp --label "plan"
yabai -m config --space 5 layout float --label "media"
yabai -m config --space 6 layout float --label "social"

yabai -m config --space 7 layout bsp
yabai -m config --space 8 layout bsp
yabai -m config --space 9 layout bsp

yabai -m rule --add label="Finder" app="^Finder$" title="(Co(py|nnect)|Move|Info|Pref)" manage=off
yabai -m rule --add label="Safari" app="^Safari$" title="^(General|(Tab|Password|Website|Extension)s|AutoFill|Se(arch|curity)|Privacy|Advance)$" manage=off
yabai -m rule --add label="System Preferences" app="^System Preferences$" title=".*" manage=off
yabai -m rule --add title='Preferences$' manage=off
yabai -m rule --add label="App Store" app="^App Store$" manage=off
yabai -m rule --add label="Activity Monitor" app="^Activity Monitor$" manage=off
yabai -m rule --add label="Dictionary" app="^Dictionary$" manage=off
yabai -m rule --add label="Dash" app="^Dash$" manage=off
yabai -m rule --add label="Telephone" app="^Telephone$" manage=off
yabai -m rule --add label="Hammerspoon Console" app="^Hammerspoon Console$" manage=off 
yabai -m rule --add label="Software Update" title="Software Update" manage=off
yabai -m rule --add label="About This Mac" app="System Information" title="About This Mac" manage=off 

yabai -m rule --add app="MailMate" space=4
yabai -m rule --add app="Discord" space=6 grid=1:1:0:0:1:1 manage=off
yabai -m rule --add app="^(Calculator|System Preferences|Archive Utility)$" manage=off

yabai -m config external_bar main:32:0

printf "yabai: configuration loaded...\\n"
